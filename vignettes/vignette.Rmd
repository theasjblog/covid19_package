---
title: "covid19Visualizer"
author: "Adrian Joseph"
date: "3/29/2020"
output: html_document
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library('covid19Visualizer')
library('kableExtra')
```

#Introduction

Simple data visualizer for COVID-19 diffusion.

## Data

Data is provided by Johns Hopkins University and is obtained from <https://github.com/CSSEGISandData/COVID-19>.

New data is obtained with (a network connection is required):

```{r getNewData}
newData <- getJHU()
```

## Plot a single metric

The data provide time series for total cases, deaths and recoveries.

Each metric can be plotted for selected countries using:

```{r doPlot}
# cases
doPlot(dataObj = newData, typePlot = 'cases',
       geographyFilter = c('Italy', 'China'), plotRate = FALSE,
       smooth = FALSE, scale = 'linear', normalizeByPop = FALSE,
       plotLim = NULL)

# deaths
doPlot(dataObj = newData, typePlot = 'deaths',
       geographyFilter = c('Italy', 'China'), plotRate = FALSE,
       smooth = FALSE, scale = 'linear', normalizeByPop = FALSE,
       plotLim = NULL)

# recovered
doPlot(dataObj = newData, typePlot = 'recovered',
       geographyFilter = c('Italy', 'China'), plotRate = FALSE,
       smooth = FALSE, scale = 'linear', normalizeByPop = FALSE,
       plotLim = NULL)
```

Each plot can be plotted in log10 scale:
```{r doPlotLog}
# cases
doPlot(dataObj = newData, typePlot = 'cases',
       geographyFilter = c('Italy', 'China'), plotRate = FALSE,
       smooth = FALSE, scale = 'log', normalizeByPop = FALSE,
       plotLim = NULL)

# deaths
doPlot(dataObj = newData, typePlot = 'deaths',
       geographyFilter = c('Italy', 'China'), plotRate = FALSE,
       smooth = FALSE, scale = 'log', normalizeByPop = FALSE,
       plotLim = NULL)

# recovered
doPlot(dataObj = newData, typePlot = 'recovered',
       geographyFilter = c('Italy', 'China'), plotRate = FALSE,
       smooth = FALSE, scale = 'log', normalizeByPop = FALSE,
       plotLim = NULL)
```

We can also plot the variation, rather than the raw numbers:
```{r doPlotRate}
# cases
doPlot(dataObj = newData, typePlot = 'cases',
       geographyFilter = c('Italy', 'China'), plotRate = TRUE,
       smooth = TRUE, scale = 'linear', normalizeByPop = FALSE,
       plotLim = NULL)

# deaths
doPlot(dataObj = newData, typePlot = 'deaths',
       geographyFilter = c('Italy', 'China'), plotRate = TRUE,
       smooth = TRUE, scale = 'linear', normalizeByPop = FALSE,
       plotLim = NULL)

# recovered
doPlot(dataObj = newData, typePlot = 'recovered',
       geographyFilter = c('Italy', 'China'), plotRate = TRUE,
       smooth = TRUE, scale = 'linear', normalizeByPop = FALSE,
       plotLim = NULL)
```

## Plot all metrics for selected countires

```{r plotAllMetrics}
# linear
plotAllMetrics(dataObj = newData, geographyFilter = c('Italy', 'China'),
               plotRate = FALSE, smooth = TRUE, scale = 'linear',
               normalizeByPop = FALSE, plotLim = NULL)

# log
plotAllMetrics(dataObj = newData, geographyFilter = c('Italy', 'China'),
               plotRate = FALSE, smooth = TRUE, scale = 'log',
               normalizeByPop = FALSE, plotLim = NULL)
```

And the rate:

```{r plotAllMetricsRate}
plotAllMetrics(dataObj = newData, geographyFilter = c('Italy', 'China'),
               plotRate = TRUE, smooth = TRUE, scale = 'linear',
               normalizeByPop = FALSE, plotLim = NULL)
```

## Map plots

```{r mapPlots}
plotMap(plotData = newData, filterByCountry = c('Italy', 'Spain'), 
                             plotMetric = 'cases',
                             chosenDay = NULL, plotType = 'doMapTrend_normalise')

plotMap(plotData = newData, filterByCountry = c('Italy', 'Spain'), 
                             plotMetric = 'cases',
                             chosenDay = NULL, plotType = 'doMapTrend')

plotMap(plotData = newData, filterByCountry = c('Italy', 'Spain'), 
                             plotMetric = 'cases',
                             chosenDay = NULL, plotType = 'doMapDataRate_raw')

plotMap(plotData = newData, filterByCountry = c('Italy', 'Spain'), 
                             plotMetric = 'cases',
                             chosenDay = NULL, plotType = 'doMapDataRate_normalised')

plotMap(plotData = newData, filterByCountry = c('Italy', 'Spain'), 
                             plotMetric = 'cases',
                             chosenDay = NULL, plotType = 'doMapGBQuarantine_binary')

plotMap(plotData = newData, filterByCountry = c('Italy', 'Spain'), 
                             plotMetric = 'cases',
                             chosenDay = NULL, plotType = 'doMapGBQuarantine')

plotMap(plotData = newData, filterByCountry = c('Italy', 'Spain'), 
                             plotMetric = 'cases',
                             chosenDay = NULL, plotType = 'doMapData_raw')

plotMap(plotData = newData, filterByCountry = c('Italy', 'Spain'), 
                             plotMetric = 'cases',
                             chosenDay = NULL, plotType = 'doMapData_normalised')

```

