---
title: "covid19Visualizer"
author: "Adrian Joseph"
date: "3/29/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library('covid19Visualizer')
library('kableExtra')
```

#Introduction

Simple data visualizer for COVID-19 diffusion.

## Data

Data is provided by Johns Hopkins University and is obtained from <https://github.com/CSSEGISandData/COVID-19>.

New data is obtained with (a network connection is required):

```{r getNewData}
newData <- refreshData()
```

## Plot a single metric

The data provide time series for total cases, deatsh and recoveries.

Each metric can be plotted for selected countries using:

```{r doPlot}
# cases
doPlot(newData, 'cases', c('Italy', 'China'))

# deaths
doPlot(newData, 'deaths', c('Italy', 'China'))

# recovered
doPlot(newData, 'recovered', c('Italy', 'China'))
```

Each plot can be plotted in log10 scale:
```{r doPlotLog}
# cases
doPlot(newData, 'cases', c('Italy', 'China'), scale = 'log')

# deaths
doPlot(newData, 'deaths', c('Italy', 'China'), scale = 'log')

# recovered
doPlot(newData, 'recovered', c('Italy', 'China'), scale = 'log')
```

We can also plot the variation, rather than the raw numbers:
```{r doPlotRate}
# cases
doPlot(newData, 'cases', c('Italy', 'China'), plotDiff = TRUE)

# deaths
doPlot(newData, 'deaths', c('Italy', 'China'), plotDiff = TRUE)

# recovered
doPlot(newData, 'recovered', c('Italy', 'China'), plotDiff = TRUE)
```

## Plot all metrics for selected countires

```{r plotAllMetrics}
# linear
plotAllMetrics(newData, c('Italy', 'China'))

# log
plotAllMetrics(newData, c('Italy', 'China'), scale = 'log')
```

And the rate:

```{r plotAllMetricsRate}
plotAllMetrics(newData, c('Italy', 'China'), plotDiff = TRUE)
```

## Map plots
```{r mapPlots}
# Simple plot
doMap(newData, FALSE, NULL, NULL, FALSE)

# A specific day
doMap(newData, FALSE, NULL, 210, FALSE)

# Specific countries
doMap(newData, FALSE, c('Italy', 'Spain'), 210, FALSE)

# Normalise by population
doMap(newData, TRUE, c('Italy', 'Spain'), 210, FALSE)

# Show trend of past 5 days compared to the previous 5 days
# This will always set normalizeByPopulation = FALSE and chosenDay = NULL
doMap(newData, FALSE, c('Italy', 'Spain'), NULL, TRUE)
```

## Summary table

```{r summaryTable}
kable(getSummaryTable(newData))
```

